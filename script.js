const questionPaperData = {
  "cse": {  
  "2nd": {
      "3rd & 4th": [
        //2024//
          { "sno": 1, "subject": "Digital Logic & Design", "code": "CSE301", "examYear": "2024", "link": "https://drive.google.com/file/d/1RGAnZ1WvAg71WwrsKCzntJOVAMbrl8Rx/view?usp=sharing" },
          { "sno": 2, "subject": "Data Structures", "code": "CSE201", "examYear": "2024", "link": "https://drive.google.com/file/d/1zst3okQm0Ioo5J5MomiIcGzQ5dwnlpR4/view?usp=sharing" },
          { "sno": 3, "subject": "Mathematics-III", "code": "MTH301", "examYear": "2024", "link": "https://drive.google.com/file/d/1Vm6T18ILwoYOdWcQaKfEQ9svP5dI3kr5/view?usp=sharing" },
          { "sno": 4, "subject": "Engineering Economics", "code": "EEE301", "examYear": "2024", "link": "https://drive.google.com/file/d/1l0V8LriNg0sktd940xtjYThG3_CTCbnc/view?usp=sharing" },
          { "sno": 5, "subject": "Object-Oriented Programming Using Java", "code": "CSE302", "examYear": "2024", "link": "https://drive.google.com/file/d/1-w_HIbnpIYKigzLmp6Cv45XPyWJnMIam/view?usp=sharing" },
          { "sno": 6, "subject": "Analog Electronic Circuit", "code": "ECE301", "examYear": "2024", "link": "https://drive.google.com/file/d/150yfl9Hp4uT45hWyNneCIOpA-xLkNj-k/view?usp=sharing" },
          { "sno": 7, "subject": "Computer Organisation & Architecture", "code": "CSE303", "examYear": "2024", "link": "https://drive.google.com/file/d/1-n7t5I9jtrGIEzW-T5jzh-U0ABRe3j5U/view?usp=sharing" },
          { "sno": 8, "subject": "Discrete Mathematics", "code": "MTH302", "examYear": "2024", "link": "https://drive.google.com/file/d/1bfwzZiNQ9d4G6iajvZwRKPp4fPc63NR9/view?usp=sharing" },
          { "sno": 9, "subject": "Data Communication", "code": "CSE304", "examYear": "2024", "link": "https://drive.google.com/file/d/12OKEZcurJNO7vWN0GIepkMGYUmwm-UAr/view?usp=sharing" },
          { "sno": 10, "subject": "Organisational Behaviour", "code": "MGT301", "examYear": "2024", "link": "https://drive.google.com/file/d/1kS0Voqd4i2VeSazym71b7pYJ66Illudq/view?usp=sharing" },
          //2023//
            { "sno": 1, "subject": "Digital Logic & Design", "code": "CSE301", "examYear": "2023", "link": "https://drive.google.com/file/d/1-L8ov2N6TaoOT6R-2rwIWEMIJUDTtJOs/view?usp=sharing" },
            { "sno": 2, "subject": "Data Structures", "code": "CSE201", "examYear": "2023", "link": "https://drive.google.com/file/d/1fYJ-pkIgWm--tUcqlaHFVv6PTwngva0r/view?usp=sharing" },
            { "sno": 3, "subject": "Mathematics-III", "code": "MTH301", "examYear": "2023", "link": "https://drive.google.com/file/d/1a0eMmanZlLRtIoVywV7I4JwWknP1VBGH/view?usp=sharing" },
            { "sno": 4, "subject": "Computer Organisation & Architecture", "code": "CSE303", "examYear": "2023", "link": "https://drive.google.com/file/d/1zvI9xSafxEvFpxKFkMuyEPvkE5KskTIJ/view?usp=sharing" },
            { "sno": 5, "subject": "Discrete Mathematics", "code": "MTH302", "examYear": "2023", "link": "https://drive.google.com/file/d/11RGq6HL5Kof6zIn1VqH3nqw46gfhjuzT/view?usp=sharing" },
            { "sno": 6, "subject": "Data Communication", "code": "CSE304", "examYear": "2023", "link": "https://drive.google.com/file/d/1AbFm_qxSZgAxMADSXiMAPXppFQXuX7UP/view?usp=sharing" },
            { "sno": 7, "subject": "Organisational Behaviour", "code": "MGT301", "examYear": "2023", "link": "https://drive.google.com/file/d/1T1NiJ9vQgRr_4Z7RgtEooUTw1h7UvAQ0/view?usp=sharing" },
            { "sno": 8, "subject": "Analog Electronic Circuit", "code": "ECE301", "examYear": "2022", "link": "https://drive.google.com/file/d/1fFQzeBkZFuUAL1Y3jtDkez2c6P-_0-_Z/view?usp=sharing" },
        
          //2022//
            { "sno": 1, "subject": "Digital Logic & Design", "code": "CSE301", "examYear": "2022", "link": "https://drive.google.com/file/d/1OQuIbZ7G3qQysz2WR0C_tZpNWcE7JtZ5/view?usp=sharing" },
            { "sno": 2, "subject": "Data Structures", "code": "CSE201", "examYear": "2022", "link": "https://drive.google.com/file/d/1bwoUxG86cbtTnmjwjsoiqSNs6m0lU5f7/view?usp=sharing" },
            { "sno": 3, "subject": "Mathematics-III", "code": "MTH301", "examYear": "2022", "link": "https://drive.google.com/file/d/1x2esQS94JXffJVWoEMfQ5nDajej696nA/view?usp=sharing" },
            { "sno": 4, "subject": "Engineering Economics", "code": "EEE301", "examYear": "2022", "link": "https://drive.google.com/file/d/1nPsYhkgdWwu9LGJd5FVzeEjY_EMMFdKk/view?usp=sharing" },
            { "sno": 5, "subject": "Object-Oriented Programming Using Java", "code": "CSE302", "examYear": "2022", "link": "https://drive.google.com/file/d/1YZLBjPcTLZO817v4Qf-8P8rgLEA5oFUE/view?usp=sharing" },
            { "sno": 6, "subject": "Analog Electronic Circuit", "code": "ECE301", "examYear": "2022", "link": "https://drive.google.com/file/d/10KFRGbISmyH2KpBy_ZhXktOKIl-Pi1IR/view?usp=sharing" },
            { "sno": 7, "subject": "Organisational Behaviour", "code": "MGT301", "examYear": "2022", "link": "https://drive.google.com/file/d/1QUrxrS3K_PErhXPLPl_iEGtp_ul2FM2N/view?usp=sharing" },
        
          //2020//
          
          
            { "sno": 1, "subject": "Data Structures", "code": "CSE201", "examYear": "2020", "link": "https://drive.google.com/file/d/1DQoKIka0dBi1LOWpBS__y_HlF2yMQQrI/view?usp=sharing" },
            { "sno": 2, "subject": "Object-Oriented Programming Using Java", "code": "CSE302", "examYear": "2020", "link": "https://drive.google.com/file/d/1zl_yWDMS6QeMm7KR-6nWrOviAGiGkpAh/view?usp=sharing" },
        
        
      ]
  },
  "3rd": {
      "5th & 6th": [
          { "sno": 1, "subject": "Advanced Computer Architecture", "code": "CSE401", "examYear": "2024", "link": "#" },
          { "sno": 2, "subject": "Database Management", "code": "CSE402", "examYear": "2024", "link": "#" },
          { "sno": 3, "subject": "Formal Language & Automata Theory", "code": "CSE403", "examYear": "2024", "link": "#" },
          { "sno": 4, "subject": "Object-Oriented Analysis & Design", "code": "CSE404", "examYear": "2024", "link": "#" },
          { "sno": 5, "subject": "Software Engineering", "code": "CSE405", "examYear": "2024", "link": "#" },
          { "sno": 6, "subject": "Optimization in Engineering", "code": "CSE406", "examYear": "2024", "link": "#" },
          { "sno": 7, "subject": "Cloud Computing", "code": "CSE407", "examYear": "2024", "link": "#" },
          { "sno": 8, "subject": "Analog and Digital Communication", "code": "ECE402", "examYear": "2024", "link": "#" },
          { "sno": 9, "subject": "Compiler Design", "code": "CSE408", "examYear": "2024", "link": "#" }
      ]
  },
  "4th": {
      "7th & 8th": [
          { "sno": 1, "subject": "Mathematics-I", "code": "MTH101", "examYear": "2021", "link": "#" },
          { "sno": 2, "subject": "Programming", "code": "CSE101", "examYear": "2021", "link": "#" },
          { "sno": 3, "subject": "Data Structures", "code": "CSE201", "examYear": "2022", "link": "#" }
      ]
  }
}
,
  "first": {
      "1st": {
        "1st & 2nd": [
    { "sno": 1, "subject": "Mathematics-I", "code": "MTH101", "examYear": "2023", "link": "#" },
    { "sno": 2, "subject": "Programming", "code": "CSE101", "examYear": "2023", "link": "#" },
    { "sno": 3, "subject": "Mathematics-I", "code": "MTH101", "examYear": "2023", "link": "#" },
    { "sno": 4, "subject": "Physics", "code": "PHY101", "examYear": "2023", "link": "#" },
    { "sno": 5, "subject": "Basic Electrical", "code": "ELE101", "examYear": "2023", "link": "#" },
    { "sno": 6, "subject": "Basic Mechanical", "code": "MECH101", "examYear": "2023", "link": "#" },
    { "sno": 7, "subject": "English", "code": "ENG101", "examYear": "2023", "link": "#" },
    { "sno": 1, "subject": "Data Structures", "code": "CSE201", "examYear": "2022", "link": "#" },
    { "sno": 2, "subject": "Basic Electronics", "code": "ELE102", "examYear": "2023", "link": "#" },
    { "sno": 3, "subject": "Basic Civil", "code": "CIV101", "examYear": "2023", "link": "#" },
    { "sno": 4, "subject": "Chemistry", "code": "CHEM101", "examYear": "2023", "link": "#" },
    { "sno": 5, "subject": "Mathematics-II", "code": "MTH102", "examYear": "2023", "link": "#" },
    { "sno": 6, "subject": "Programming Using C", "code": "CSE102", "examYear": "2023", "link": "#" }
  ]
}
},
};

// Update year dropdown based on branch
function updateYearOptions() {
  const branch = document.getElementById("branch-select").value;
  const yearSelect = document.getElementById("year-select");
  yearSelect.innerHTML = '<option value="">--Choose Year--</option>';

  if (branch && questionPaperData[branch]) {
      Object.keys(questionPaperData[branch]).forEach(year => {
          const option = document.createElement("option");
          option.value = year;
          option.textContent = year + " Year";
          yearSelect.appendChild(option);
      });
  }
  document.getElementById("semester-select").innerHTML = '<option value="">--Choose Semester--</option>';
  document.getElementById("question-table-container").style.display = "none";
}

// Update semester dropdown based on the selected year
function updateSemesterOptions() {
  const branch = document.getElementById("branch-select").value;
  const year = document.getElementById("year-select").value;
  const semesterSelect = document.getElementById("semester-select");
  semesterSelect.innerHTML = '<option value="">--Choose Semester--</option>';

  if (branch && year && questionPaperData[branch][year]) {
      Object.keys(questionPaperData[branch][year]).forEach(semester => {
          const option = document.createElement("option");
          option.value = semester;
          option.textContent = "Semester " + semester;
          semesterSelect.appendChild(option);
      });
  }
  document.getElementById("question-table-container").style.display = "none";
}

// Show the table of question papers
function showQuestionTable() {
  const branch = document.getElementById("branch-select").value;
  const year = document.getElementById("year-select").value;
  const semester = document.getElementById("semester-select").value;
  const tableBody = document.getElementById("table-body");

  tableBody.innerHTML = "";

  if (branch && year && semester && questionPaperData[branch][year] && questionPaperData[branch][year][semester]) {
      questionPaperData[branch][year][semester].forEach((item, index) => {
          const row = `
              <tr>
                  <td>${item.sno}</td>
                  <td>${item.subject}</td>
                  <td>${item.code}</td>
                  <td>${item.examYear}</td>
                  <td><a href="${item.link}" target="_blank">Download</a></td>
              </tr>
          `;
          tableBody.innerHTML += row;
      });
      document.getElementById("question-table-container").style.display = "block";
  } else {
      document.getElementById("question-table-container").style.display = "none";
  }
}

//------------------------------Search bar logic--------------------------//
// Branch names
const branches = ["Computer Science", "Mechanical Engineering", "Civil Engineering", "Electrical Engineering", "Electronics", "Information Technology"];

// Year names
const years = ["Year 1", "Year 2", "Year 3"];

// Subject names (organized by branch, year, and semester)
const subjects = {
  "First year":{
    "Year 1": {
      "Semester 1": ["Mathematics-I", "Physics", "Programming in C &data structures", "Basic Electrical", "English","Basic Mechanical"],
      "Semester 2": ["Mathematics-II", "Chemistry", "Basic Civil", "Basic Electronics", "Universal Human Value", "Engineering Mechanics"]
    },
  },
  "Computer Science": {
    "Year 2": {
      "Semester 3": ["Discrete Mathematics", "Data structures", "OOp using Java", "Digital Logic & Design", "Enginnering Economics"],
      "Semester 4": ["Mathematics-III","Design Analysis & Design", "Data Communication", "Organisatioinal Behaviour", "Analog Electronics"]
    },
    "Year 3": {
      "Semester 5": ["Formal Language & Automata Theory", "Database Management System","Object-oriented Analysis & Design", "Advance Computer Archiecture", "Operating System"],
      "Semester 6": ["Software Engineering", "compiler Design", "Optimization in Engineering", "Cloud Computing", "Analog and Digital Communication"]
    },
    "Year 4": {
      "Semester 7": ["Entrapreneurship Development", "Internet of things", " Software project Management", " Industrial Safety Engineering", "Digital Image Processing", "Disaster Management"],
    }
  },
  "Mechanical Engineering": {
    "Year 1": {
      "Semester 1": ["Thermodynamics", "Engineering Drawing", "Material Science", "Mathematics", "English"],
      "Semester 2": ["Fluid Mechanics", "Mechanics of Materials", "Engineering Mechanics", "Physics", "Programming Basics"]
    }
  }
};

const searchBar = document.getElementById("searchBar");
const searchResults = document.getElementById("searchResults");

searchBar.addEventListener("input", () => {
  const query = searchBar.value.toLowerCase().trim();
  searchResults.innerHTML = ""; // Clear previous results

  // Hide search results if the query is empty
  if (!query) {
    searchResults.style.display = "none";
    return;
  }

  // Array to store the results
  const results = [];

  // Search in branches
  branches.forEach((branch) => {
    if (branch.toLowerCase().includes(query)) {
      results.push({ type: "Branch", name: branch, id: branch.toLowerCase().replace(/\s+/g, '-') });
    }
  });

  // Search in years
  years.forEach((year) => {
    if (year.toLowerCase().includes(query)) {
      results.push({ type: "Year", name: year, id: year.toLowerCase().replace(/\s+/g, '-') });
    }
  });

  // Search in subjects (nested search)
  for (const branch in subjects) {
    for (const year in subjects[branch]) {
      for (const semester in subjects[branch][year]) {
        subjects[branch][year][semester].forEach((subject) => {
          if (subject.toLowerCase().includes(query)) {
            results.push({
              type: "Subject",
              name: `${branch} > ${year} > ${semester} > ${subject}`,
              id: `${branch}-${year}-${semester}-${subject.toLowerCase().replace(/\s+/g, '-')}`,
            });
          }
        });
      }
    }
  }

  // Display the results
  if (results.length > 0) {
    results.forEach((result) => {
      const resultItem = document.createElement("div");
      resultItem.className = "result-item";
      resultItem.textContent = `[${result.type}] ${result.name}`;
      
      // Make the result item clickable
      resultItem.onclick = () => {
        navigateToElement(result.id);
      };

      searchResults.appendChild(resultItem);
    });
  } else {
    // Show "No results" if no matches found
    const noResults = document.createElement("div");
    noResults.className = "no-results";
    noResults.textContent = "No results found.";
    searchResults.appendChild(noResults);
  }

  // Show the search results container
  searchResults.style.display = "block";
});

// Function to navigate to the element
function navigateToElement(id) {
  const element = document.getElementById(id);

  if (element) {
    // Scroll to the corresponding element smoothly
    element.scrollIntoView({ behavior: "smooth", block: "center" });
  } else {
    alert("Element not found.");
  }
}
